{% load staticfiles %}

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      {% block title %} | GroundUp{% endblock %}
    </title>
    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:700" rel="stylesheet">
    <link rel="shortcut icon"
          type="image/x-icon"
	  href="{% static  'newsroom/images/favicon-201809.ico' %}" />
    <link href="datepicker.min.css" rel="stylesheet">

    {% with meta_description|default:"GroundUp publishes original public interest news. We mainly cover education, health, sanitation, immigration and human rights stories." as desc  %}
      {% block meta_description_block %}
        <meta name="description"
              content="{{desc|truncatechars:190}}"/>
	<meta property="og:description" content="{{desc}}"/>
      {% endblock %}
    {% endwith %}

    {% block seo_fields %}
      {% block facebook-identifier %}
	<meta property="fb:app_id" content="794347254025697" />
      {% endblock %}
      <meta property="og:site_name" content="GroundUp News" />
      <meta property="og:url" content="{{ request.build_absolute_uri }}"/>
      <meta property="og:updated_time" content="{% now "c" %}" />
    {% endblock %}

    {% block analytics %}
      {% include "piwik.html" %}
    {% endblock %}

    {% block additional_head %}
    {% endblock %}

    {% block bootstrap-css %}
      {% include "bootstrap_css.html" %}
    {% endblock %}

    {% block newsroom-css %}

      <style>
       {% include "newsroom/newsroom_styles.css" %}
       {% include "newsroom/home.css" %}
       {% include "newsroom/header.css" %}
       {% include "newsroom/social_media.css" %}
       {% include "newsroom/footer.css" %}
       {% include "newsroom/article.css" %}
       {% include "newsroom/most_popular.css" %}
       {% include "newsroom/sidebar.css" %}
       {% include "newsroom/read_next.css" %}
       {% include "newsroom/about_us.css" %}
       {% include "newsroom/search.css" %}
       {% include "newsroom/letters.css" %}
       {% include "datepicker.min.css" %}
      </style>

    {% endblock %}

    {% block css-override %}
    {% endblock %}


    {% block top-js %}
    {% endblock %}


  </head>

  <body>

    {% block body %}
      {% include 'icons.svg' %}

      {% block banner %}
	{% include 'banner.html' %}
      {% endblock %}

      <div id="BelowTheBanner" class="{{content_type}}">
	{% block messages %}
	  {% include 'messages.html' %}
	{% endblock %}

	{% block content-header %}
	{% endblock %}

        {% block content-wrapper %}
	  {% block content %}
	  {% endblock %}
        {% endblock %}

	{% block admin-area %}
	  {% if request.user.is_staff and can_edit %}
	    <div id="admin-area">
	      <div id="admin-user">
		{{request.user}}
	      </div>
	      {% block admin-area-additional %}
	      {% endblock %}
	    </div>
	  {% endif %}
	{% endblock %}
      </div>

      {% block footer %}
	{% include 'footer.html' %}
      {% endblock %}

      {% block javascript-includes %}
	{% include 'javascripts.html' %}
      {% endblock %}

    {% endblock %}

  </body>
  <script>

   $( document ).ready(function() {
       var search_input = $('.header__search__input')
       var advanced_search = $('.advanced-search')
       var header_bar = $('.header')
       var adv_arrow = $('.adv-filter-arrow')
       var adv_form = $('.adv-filter-form')
       
       search_input.on('focus', function() {
           advanced_search.slideDown('slow')
       })
       header_bar.on('mouseleave', function() {
           advanced_search.slideUp('slow')
       })

       adv_arrow.on('click', function() {
           var icon = $(this)
           if (icon.hasClass('fa-angle-up')) {
               console.log('slideup')
               adv_form.slideUp('slow')
               adv_arrow.toggleClass('fa-angle-up fa-angle-down')
           } else {
               console.log('slidedown')
               $('.adv-filter-form').slideDown('slow')
               adv_arrow.toggleClass('fa-angle-down fa-angle-up')
           }
       })

       $('[data-toggle="datepicker"]').datepicker();
   });
   
  </script>

</html>
